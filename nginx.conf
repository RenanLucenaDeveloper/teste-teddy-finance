# Define a configuração do servidor Nginx
server {
    # Escuta na porta 80, a porta padrão para HTTP
    listen 80;

    # O nome do servidor pode ser qualquer um
    server_name microfrontend-net;

    # Define o diretório raiz para servir os arquivos estáticos
    root /usr/share/nginx/html;

    # Adiciona os cabeçalhos de CORS para todas as respostas
    # O '*' permite acesso de qualquer origem, ideal para desenvolvimento
    add_header 'Access-Control-Allow-Origin' '*' always;
    add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS, PUT, DELETE' always;
    add_header 'Access-Control-Allow-Headers' 'DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range' always;
    add_header 'Access-Control-Expose-Headers' 'Content-Length,Content-Range' always;

    # Habilita a compressão gzip
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

    # Define o local para servir os arquivos
    location / {
        # Serve o arquivo index.html, útil para SPAs
        try_files $uri $uri/ /index.html;
    }
}

